{% extends 'blog/base.html' %}

{% block content %}
    <h2>All Posts</h2>

    {% for post in posts %}
        <article class="post mb-4 p-3 border rounded shadow-sm">
            <time class="text-muted small d-block mb-2">
                Published: {{ post.published_date }}
            </time>

            <h3>
                <a href="{% url 'post_detail' pk=post.pk %}" class="text-decoration-none text-dark">
                    {{ post.title }}
                </a>
            </h3>

            <p>{{ post.text|truncatewords:30 }}</p>
            <p class="text-muted">Author: {{ post.author }}</p>

            {% if user.is_authenticated and post.author == user %}
                <!-- केवल अपनी post के लिए edit और delete बटन -->
                <a href="{% url 'post_edit' pk=post.pk %}" class="btn btn-sm btn-warning">
                    Edit
                </a>
                <a href="{% url 'post_delete' pk=post.pk %}" class="btn btn-sm btn-danger">
                    Delete
                </a>
            {% endif %}
        </article>
    {% empty %}
        <p>No posts available right now</p>
    {% endfor %}
{% endblock %}
